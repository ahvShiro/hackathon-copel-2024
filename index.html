<script>
    const totalItems = 100;
    const itemsPerPage = 20;
    let currentPage = 1;

    // Array para armazenar os dados
    const items = [];
    const usedIds = new Set(); // Para garantir IDs únicos

    // Função para gerar IDs de 6 dígitos únicos
    function generateUniqueId() {
        let id;
        do {
            id = Math.floor(100000 + Math.random() * 900000); // Gera um número entre 100000 e 999999
        } while (usedIds.has(id)); // Garante que o ID não foi usado antes
        usedIds.add(id);
        return id;
    }

    // Preenche a array com valores aleatórios
    for (let i = 0; i < totalItems; i++) {
        items.push({
            id: generateUniqueId(),
            status: Math.floor(Math.random() * 5) + 1,
            date: new Date().toLocaleDateString()
        });
    }

    function generateList() {
        // Ordena os itens em ordem decrescente de status
        items.sort((a, b) => b.status - a.status);

        const dataList = document.getElementById('data-list');
        dataList.innerHTML = '';

        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = startIndex + itemsPerPage;

        for (let i = startIndex; i < endIndex && i < totalItems; i++) {
            const listItem = document.createElement('li');
            listItem.innerHTML = `
                <span>ID: ${items[i].id}</span>
                <span>Data: ${items[i].date}</span>
                <span class="status status-${items[i].status}">${items[i].status}</span>
            `;
            listItem.addEventListener('click', () => openReport(items[i].id));
            dataList.appendChild(listItem);
        }
    }

    function openReport(id) {
        window.open(`report.html?id=${id}`, '_blank');
    }

    function prevPage() {
        if (currentPage > 1) {
            currentPage--;
            generateList();
        }
    }

    function nextPage() {
        if (currentPage * itemsPerPage < totalItems) {
            currentPage++;
            generateList();
        }
    }

    function generateChart() {
        const ctx = document.getElementById('riskChart').getContext('2d');
        const statusCounts = [0, 0, 0, 0, 0];

        items.forEach(item => {
            statusCounts[item.status - 1]++;
        });

        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['1', '2', '3', '4', '5'],
                datasets: [{
                    label: 'Quantidade de Árvores por Status',
                    data: statusCounts,
                    backgroundColor: ['#d4fa00', '#FFEB3B', '#FF9800', '#fa4b00', '#D32F2F']
                }]
            }
        });
    }

    // Gera a lista e o gráfico ao carregar a página
    generateList();
    generateChart();
</script>
